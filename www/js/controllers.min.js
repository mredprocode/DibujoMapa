angular.module("gpsDraw.controllers",[]).controller("MapboxGLController",["$scope","leafletData",function(e,n){var o=new L.FeatureGroup;new L.Control.Draw;angular.extend(e,{center:{lat:51.505,lng:-.04,zoom:13},layers:{},mapbox:{name:"Mapbox Light",url:"http://api.tiles.mapbox.com/v4/{mapid}/{z}/{x}/{y}@2x.png?access_token={apikey}",type:"mapbox",options:{apikey:"pk.eyJ1IjoibXJlZHByb2NvZGUiLCJhIjoiY2lpemY0aDYyMDA0Z3VkbHdxa3BudnJpMiJ9.PMtn2mheSO79sACxOri8fw",mapid:"mapbox.streets"}},defaults:{zoomControl:!1}}),n.getMap().then(function(t){t.addLayer(o),n.getLayers().then(function(n){e.$on("MyEvent",function(){e.Empieza=new L.Draw.Polyline(t).enable(o.polyline)}),t.on("draw:created",function(n){var t=n.layer;o.addLayer(t),console.log(JSON.stringify(t.toGeoJSON())),e.$on("MyEvent1",function(){t.options.editing||(t.options.editing={}),t.editing.enable()}),e.$on("MyEvent2",function(){t.options.editing||(t.options.editing={}),t.editing.disable()})})})})}]);